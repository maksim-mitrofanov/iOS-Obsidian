# Коллекции в Swift
Всё о том, как реализованы коллекции.

### Управление памятью:
Системные коллекции хранят на стэке только свою управляющую структуру. 
В  управляющей структуре хранятся данные о коллекции (размер, ёмкость, указатель в кучу).

Сами объекты коллекции хранятся в куче, даже если эти объекты - ValueType.
Таким образом, размер коллекции не ограничен размером стэка.

Пример управляющей структуры коллекции:
```
struct ArrayBuffer<Element> {
    var pointer: UnsafeMutablePointer<Element> // Указатель на данные
    var capacity: Int                          // Ёмкость буфера
    var count: Int                             // Количество элементов
}
```

### Копирование:
Системные коллекции в swift реализуют [[Copy on механизмы в Swift]].
#writing